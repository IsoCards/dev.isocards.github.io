{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/gamemode-base.ts","./src/app/help/help.component.ts","./src/app/help/help.component.html","./src/app/home/home.component.ts","./src/app/home/home.component.html","./src/app/play/deal/deal.component.ts","./src/app/play/deal/deal.component.html","./src/app/play/game/player-game.component.ts","./src/app/play/game/player-game.component.html","./src/app/play/lobby/player-lobby.component.ts","./src/app/play/lobby/player-lobby.component.html","./src/app/play/lobby/snapshot/snapshot.component.ts","./src/app/play/lobby/snapshot/snapshot.component.html","./src/app/play/play-routing.module.ts","./src/app/play/play.component.ts","./src/app/play/play.component.html","./src/app/play/play.module.ts","./src/app/services/server/client.ts","./src/app/services/server/server.service.ts","./src/app/services/server/session.ts","./src/app/services/storage/storage.service.ts","./src/app/shared/components/connect/connect.component.ts","./src/app/shared/components/connect/connect.component.html","./src/app/shared/pipes/prompt/prompt.pipe.ts","./src/app/shared/pipes/truthy/truthy.pipe.ts","./src/app/shared/shared.module.ts","./src/app/social/game/social-game.component.ts","./src/app/social/game/social-game.component.html","./src/app/social/lobby/social-lobby.component.ts","./src/app/social/lobby/social-lobby.component.html","./src/app/social/setup/setup.component.ts","./src/app/social/setup/setup.component.html","./src/app/social/social-routing.module.ts","./src/app/social/social.component.ts","./src/app/social/social.component.html","./src/app/social/social.module.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { HomeComponent } from './home/home.component';\nimport { HelpComponent } from './help/help.component';\nimport { environment } from 'src/environments/environment';\n\nconst routes: Routes = [\n    { path: '', component: HomeComponent },\n    { path: 'help', component: HelpComponent },\n];\n\n@NgModule({\n    imports: [RouterModule.forRoot(routes, { useHash: !!(<any>navigator).standalone || environment.useHash })],\n    exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'app-root',\n    templateUrl: './app.component.html',\n    styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {}\n","<router-outlet></router-outlet>","import { NgModule, Injectable } from '@angular/core';\nimport { BrowserModule, HammerModule, HAMMER_GESTURE_CONFIG, HammerGestureConfig } from '@angular/platform-browser';\nimport * as Hammer from 'hammerjs';\n\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { FormsModule } from '@angular/forms';\n\nimport { SharedModule } from './shared/shared.module';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { PlayModule } from './play/play.module';\nimport { SocialModule } from './social/social.module';\n\nimport { AppComponent } from './app.component';\nimport { HomeComponent } from './home/home.component';\nimport { HelpComponent } from './help/help.component';\n\n@Injectable()\nclass CustomHammerConfig extends HammerGestureConfig {\n    overrides = <any>{\n      'swipe': { direction: Hammer.DIRECTION_ALL }\n    };\n}\n\n@NgModule({\n    declarations: [\n        AppComponent,\n        HomeComponent,\n        HelpComponent,\n    ],\n    imports: [\n        BrowserModule,\n        HammerModule,\n        BrowserAnimationsModule,\n        FormsModule,\n        SharedModule, // truthy pipe not found without this for some reason\n        AppRoutingModule,\n        PlayModule,\n        SocialModule,\n    ],\n    providers: [\n        {\n            provide: HAMMER_GESTURE_CONFIG,\n            useClass: CustomHammerConfig\n        }\n    ],\n    bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { OnInit, OnDestroy, Directive } from '@angular/core';\nimport { ServerService } from 'src/app/services/server/server.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { StorageService } from 'src/app/services/storage/storage.service';\nimport { Subscription } from 'rxjs';\nimport { Session } from 'src/app/services/server/session';\nimport { GameState, ClientState } from './common/interfaces';\n\n@Directive()\nexport class GameModeBase implements OnInit, OnDestroy {\n\n    name = '';\n    role = 'host';\n    defaultRouteCommand: string[] = [];\n    connectionSubscription: Subscription;\n    gameStateSubscription: Subscription;\n    clientStateSubscription: Subscription;\n\n    private currentRouteCommand: string[] = [];\n\n    constructor(protected route: ActivatedRoute, protected router: Router, public server: ServerService, protected storage: StorageService) {}\n\n    determineRoute(game: GameState, client: ClientState): string[] {\n        return null;\n    }\n\n    ngOnDestroy() {\n        console.log(`[${this.name}] OnDestroy`);\n        this.gameStateSubscription?.unsubscribe();\n        this.clientStateSubscription?.unsubscribe();\n        this.connectionSubscription?.unsubscribe();\n        // tear down the socket but leave the stored state - accidental back button can then come forward again\n        // @TODO: not ideal that the \"Join\" button on homescreen still brings us back here?\n        // maybe a 'resume' button added for recent state only with the other buttons clearing state\n        this.server?.activeSession?.socket?.close();\n    }\n\n    async ngOnInit() {\n\n        console.log(`[${this.name}] OnInit`);\n\n        if (this.route.snapshot.data.role) {\n            this.role = this.route.snapshot.data.role;\n        }\n\n        this.connectionSubscription = this.server.connected.subscribe(connected => {\n            if (!connected) this.onDisconnected();\n            else this.onConnected();\n        });\n\n        // assumption below is that there is NEVER an active session upon reaching this page\n\n        const { lastRole, lastSession, lastToken, lastId } = this.storage;\n        if (lastRole && lastRole !== this.role) {\n            console.log(`[${this.name}] role changed, clearing stored conn`);\n            this.storage.clear(); // clear the no-longer-relevant state. might want to clear only certain items\n        }\n        else if (lastSession && lastRole) {\n            console.log(`[${this.name}] stored conn detected, attempting reconnect`);\n            try {\n                const reconnect = (lastToken && lastId) ? { token: lastToken, id: lastId } : undefined;\n                // unfortunately errors below will cause an error log even though caught\n                // circumventing this would require a different method of refusing ws connections server side\n                await this.server.connectSession(lastSession, lastRole, reconnect);\n                // determineRoute will now kick in and determine where we should go\n            }\n            catch {\n                this.storage.clear(); // might want to clear only certain items\n                console.log(`[${this.name}] reconnect failed, routing to default (${this.defaultRouteCommand[0]})`);\n                this.router.navigate(this.defaultRouteCommand, { skipLocationChange: true, relativeTo: this.route });\n            }\n        }\n        else {\n            console.log(`[${this.name}] no stored conn, routing to default (${this.defaultRouteCommand[0]})`);\n            this.router.navigate(this.defaultRouteCommand, { skipLocationChange: true, relativeTo: this.route });\n        }\n    }\n\n    processPossibleRouteChange() {\n        const routeCommand = this.determineRoute(this.server.activeSession.state, this.server.activeClient.state);\n        if (!routeCommand) return;\n        if (this.currentRouteCommand[0] === routeCommand[0]) return;\n        this.currentRouteCommand = routeCommand;\n        console.log(`[${this.name}] routing to ${routeCommand[0]}`);\n        this.router.navigate(routeCommand, { skipLocationChange: true, relativeTo: this.route });\n    }\n\n    onDisconnected() {\n        console.log(`[${this.name}] disconnected`);\n        // may need to appropriately handle different circumstances e.g closed for a reason vs closed due to error?\n        // might just want to revert to connect route with a message (triggered by server close)\n        // might want to try refresh (socket error that a refresh will fix) - and message somehow only if *that* fails\n        // might want to return home (user exit?)\n\n        // if the session is really gone the failed reconnect after reload will take care of clearing storage\n        // forced reload is not ideal if this was user-driven action though\n        location.reload();\n    }\n\n    onConnected() {\n        console.log(`[${this.name}] connected`);\n        this.processPossibleRouteChange();\n        this.gameStateSubscription = this.server.activeSession.observableState.subscribe(() => this.processPossibleRouteChange());\n        this.clientStateSubscription = this.server.activeClient.observableState.subscribe(() => this.processPossibleRouteChange());\n    }\n\n    exit() {\n        // deliberate exit, clear the stored state so we don't attempt to reconnect on reload\n        this.storage.clear();\n    }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'app-help',\n    templateUrl: './help.component.html',\n    styleUrls: ['./help.component.scss']\n})\nexport class HelpComponent implements OnInit {\n\n    constructor() { }\n\n    ngOnInit(): void {\n    }\n\n}\n","<h1 class=\"page-title\">Help</h1>\n\n<div class=\"flex-pad\"></div>\n\n<img style=\"max-width: 300px;\" src=\"../../assets/TrollFace.jpg\">\n\n<br>\n\n<p class=\"page-explanation\">Welp! I haven't written any help yet.</p>\n\n<p class=\"page-explanation\">Remind me later ¯\\_(ツ)_/¯</p>\n\n<div class=\"flex-pad\"></div>","import { Component, OnInit } from '@angular/core';\nimport { StorageService } from 'src/app/services/storage/storage.service';\n\n@Component({\n    selector: 'app-home',\n    templateUrl: './home.component.html',\n    styleUrls: ['./home.component.scss']\n})\nexport class HomeComponent implements OnInit {\n\n    constructor(private storage: StorageService) {}\n\n    ngOnInit(): void {\n        this.storage.clear();\n    }\n}\n","<h1 class=\"page-title\">IsoCards!</h1>\n\n<p class=\"page-explanation\">IsoCards is the card game for the modern social distancer! It seeks to retain\n    the social elements of playing cards while supporting contact-free gameplay within a single household and\n    easy extension across multiple households</p>\n\n<div class=\"flex-pad\"></div>\n\n<div class=\"button-container\">\n    <button class=\"big-button\" routerLink=\"/social\">Start Game</button>\n    <p class=\"button-caption\">(Do this on your <strong>social screen</strong>)</p>\n    <button class=\"big-button\" routerLink=\"/play\">Join Game</button>\n    <p class=\"button-caption\">(Do this on your <strong>phone</strong>)</p>\n    <button class=\"big-button\" routerLink=\"/mirror\">Extend Game</button>\n    <p class=\"button-caption\">(Extend social screen to <strong>other places</strong>)</p>\n    <button class=\"big-button\" routerLink=\"/help\">Help!</button>\n    <p class=\"button-caption\">(Do this if you're thinking <strong>WTF is this?!?</strong>)</p>\n</div>\n\n<div class=\"flex-pad\"></div>","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { trigger, transition, style, animate, keyframes } from '@angular/animations';\nimport { Subscription } from 'rxjs';\nimport { ServerService } from 'src/app/services/server/server.service';\nimport { PlayerClient } from 'src/app/services/server/client';\nimport { Session } from 'src/app/services/server/session';\nimport { GameState, Subphase, CardSet } from 'src/app/common/interfaces';\n\nconst flashFrames = keyframes([\n    style({ color: \"initial\", offset: 0 }),\n    style({ color: \"hotpink\", offset: 0.2 }),\n    style({ color: \"hotpink\", offset: 0.8 }),\n    style({ color: \"initial\", offset: 1 }),\n]);\n\n@Component({\n    selector: 'app-deal',\n    templateUrl: './deal.component.html',\n    styleUrls: ['./deal.component.scss'],\n    animations: [\n        trigger('noop', [\n            transition(':enter', animate('0s'))\n        ]),\n        trigger('flash', [\n            transition('* => *', [ animate('1s', flashFrames) ]),\n        ]),\n        trigger('modal', [\n            transition(':enter', [\n                style({ opacity: 0 }),\n                animate('200ms', style({ opacity: 1 }))\n            ]),\n            transition(':leave', [\n                style({ opacity: 1 }),\n                animate('200ms', style({ opacity: 0 }))\n            ])\n        ]),\n        trigger('fly-in', [\n            transition(':enter', [\n                style({ transform: 'translateY(-100%)' }),\n                animate('100ms', style({ transform: 'translateY(0%)' }))\n            ]),\n        ]),\n        trigger('fly-out', [\n            transition(':leave', [\n                style({ transform: 'translateY(0%)' }),\n                animate('100ms', style({ transform: 'translateY(-100%)' }))\n            ]),\n        ])\n    ],\n})\nexport class PlayerDealComponent implements OnInit, OnDestroy {\n\n    session: Session;\n    player: PlayerClient;\n    currentRevealCard = 0;\n    stateSubscription: Subscription;\n    endTurnCountdown = 3;\n\n    // animation state\n    promptRevealOn = false;\n    responseRevealOn = false;\n    cardSetRevealIndex = 0;\n    cardSetEndReached = false;\n    endTurnSeconds = 0;\n\n    // tutorial state\n    helpScreensDone = {\n        'draw-prompt': true,\n        'read-prompt': true,\n        'gather': true,\n        'announce': true,\n        'browse': true,\n        'award': true,\n    };\n\n    constructor(private server: ServerService) { }\n\n    captureSwipe() {}\n\n    ngOnInit() {\n        this.session = this.server.activeSession;\n        this.player = this.server.activeClient as PlayerClient;\n\n        const hasDoneTutorials = localStorage.getItem('dealer-tutorial-complete');\n\n        // enable tutorial screens\n        if (!hasDoneTutorials) {\n            for (const key in this.helpScreensDone) {\n                this.helpScreensDone[key] = false;\n            }\n        }\n\n        this.stateSubscription = this.session.observableState.subscribe((state: GameState) => {\n\n            if (state.subphase === Subphase.TurnBegin) {\n\n                // reset animation state\n                this.promptRevealOn = false;\n                this.responseRevealOn = false;\n                this.endTurnSeconds = 0;\n\n                // save tutorial progress\n                if (!hasDoneTutorials) {\n                    localStorage.setItem('dealer-tutorial-complete', 'true');\n                }\n            }\n\n            if (state.subphase === Subphase.DealerAnnouncingPlayerCards) {\n                this.cardSetRevealIndex = 0;\n                this.cardSetEndReached = this.session.state.promptCard.responses === 1;\n            }\n        });\n    }\n\n    ngOnDestroy() {\n        this.stateSubscription?.unsubscribe();\n    }\n\n    get statusText() {\n        switch (this.session.state.subphase) {\n            case Subphase.TurnBegin:\n                return 'Draw a Prompt';\n            case Subphase.DealerAnnouncingCard:\n                return 'Read and Reveal';\n            case Subphase.DealerAnnouncingPlayerCards:\n                if (this.session.state.promptCard.responses === 1) {\n                    return 'Read and Reveal';\n                }\n                else {\n                    return `Read and Reveal (${this.session.state.promptCard.responses} cards/player)`;\n                }\n            case Subphase.PlayersPlaying:\n                return 'Waiting on Players';\n            case Subphase.AwaitingDealerGather:\n                return 'Gather Responses';\n            case Subphase.DealerJudging:\n                return 'Pick a Winner!';\n            case Subphase.TurnResults:\n                return 'Results';\n            default:\n                return this.session.state.subphase as string;\n        }\n    }\n\n    get subStatusText() {\n        if (this.session.state.subphase === Subphase.DealerAnnouncingPlayerCards) {\n            return `${this.currentRevealCard + 1} of ${this.player.state.responseOptions.length}`;\n        }\n        else return 'Dealer';\n\n    }\n\n    drawPromptCard() {\n        this.server.drawPromptCard();\n    }\n\n    revealPromptCard() {\n        this.promptRevealOn = true;\n        this.server.revealPromptCard();\n    }\n\n    gatherCards() {\n        this.server.gatherCards();\n    }\n\n    bumpSetIndex() {\n        this.cardSetRevealIndex = ++this.cardSetRevealIndex % this.session.state.promptCard.responses;\n        if (this.cardSetRevealIndex === this.session.state.promptCard.responses - 1) {\n            this.cardSetEndReached = true;\n        }\n    }\n\n    revealPlayerCard() {\n        if (!this.cardSetEndReached) {\n            return;\n        }\n        this.cardSetRevealIndex = 0;\n        this.server.revealPlayerCards(this.player.state.responseOptions[this.currentRevealCard].id);\n        this.currentRevealCard = ++this.currentRevealCard % this.player.state.responseOptions.length;\n    }\n\n    selectWinner(cardset: CardSet) {\n        this.server.selectWinner(cardset.id);\n\n        this.endTurnSeconds = this.endTurnCountdown;\n        const interval = setInterval(() => {\n            this.endTurnSeconds--;\n            if (this.endTurnSeconds === 0) {\n                clearInterval(interval);\n            }\n        }, 1000);\n    }\n\n    endTurn() {\n        this.server.endTurn();\n    }\n\n    debugAnim(event, stage) {\n        console.log(`${event.triggerName} ${stage} (${event.fromState} => ${event.toState})`);\n    }\n\n}","<h1 class=\"page-title session-name dealer-variant\">{{session.name}}</h1>\n\n<!-- dealer view -->\n<div class=\"section dealer-variant\" [@noop]>\n\n    <span *ngIf=\"session.state.subphase !== 'turn-results'\" [@flash]=\"statusText\" class=\"hint\">{{statusText}}</span>\n\n    <!-- begin (ready to draw) -->\n    <div *ngIf=\"session.state.subphase === 'turn-begin'\" style=\"display: flex; align-items: stretch;\">\n        <div class=\"card ghost\" (swipedown)=\"drawPromptCard()\">\n            Your deal {{player.state.name}}! Grab a prompt card.\n        </div>\n    </div>\n\n    <!-- reading prompt card aloud -->\n    <div (@fly-out.done)=\"promptRevealOn = false;\" *ngIf=\"session.state.subphase === 'dealer-talking' && player.state.promptCard\">\n        <div [@fly-in] class=\"card prompt\" (swipeup)=\"revealPromptCard()\">\n            <div [innerHtml]=\"player.state.promptCard.content | prompt\"></div>\n        </div>\n    </div>\n\n    <!-- waiting for players -->\n    <div *ngIf=\"!promptRevealOn && session.state.subphase === 'players-playing'\" style=\"align-items: center;\">\n        <div class=\"flex-pad\"></div>\n        <div class=\"spinner invert\">\n            <div class=\"double-bounce1\"></div>\n            <div class=\"double-bounce2\"></div>\n        </div>\n        <div>Waiting for players</div>\n        <div class=\"flex-pad\"></div>\n    </div>\n\n    <!-- gather response cards -->\n    <div *ngIf=\"session.state.subphase === 'awaiting-dealer-gather'\">\n        <div class=\"card ghost\" (swipedown)=\"gatherCards()\">\n            Gather response cards.\n        </div>\n    </div>\n\n    <!-- read response cards -->\n    <div *ngIf=\"session.state.subphase === 'dealer-announcing-player-cards'\">\n        <div [@fly-in] class=\"card response\" (click)=\"bumpSetIndex()\" (swipeup)=\"revealPlayerCard()\">\n            <div *ngIf=\"session.state.promptCard.responses > 1\" class=\"index\">{{cardSetRevealIndex + 1}}/{{session.state.promptCard.responses}}</div>\n            <div class=\"flex-pad\"></div>\n            <div [innerHtml]=\"player.state.responseOptions[currentRevealCard].cards[cardSetRevealIndex]?.content | prompt\"></div>\n            <div class=\"flex-pad\"></div>\n        </div>\n    </div>\n\n    <!-- pick a winner -->\n    <div *ngIf=\"session.state.subphase === 'dealer-judging'\" class=\"grid-container\">\n        <div (click)=\"selectWinner(card)\" *ngFor=\"let card of player.state.responseOptions; let i = index\" class=\"card response tiny\">\n            <div class=\"number\">{{i + 1}}</div>\n        </div>\n    </div>\n\n    <span *ngIf=\"session.state.subphase !== 'turn-results'\" [@flash]=\"subStatusText\" class=\"hint\">{{subStatusText}}</span>\n\n</div>\n\n<!-- results holdup -->\n<div [@modal] *ngIf=\"session.state.subphase === 'turn-results'\" class=\"help-modal\" (swipeup)=\"captureSwipe()\">\n    <div *ngIf=\"endTurnSeconds > 0\">{{endTurnSeconds}}</div>\n    <div *ngIf=\"endTurnSeconds === 0\">Ready to Proceed?</div>\n    <div *ngIf=\"endTurnSeconds === 0\" (click)=\"endTurn()\" class=\"done\">✓</div>\n</div>\n\n<!-- tutorial modals -->\n<div [@modal] *ngIf=\"!helpScreensDone['draw-prompt'] && (session.state.subphase === 'turn-begin')\" class=\"help-modal\" (swipeup)=\"captureSwipe()\">\n    <div>Your deal! Swipe <strong>DOWN</strong> to draw a prompt card</div>\n    <div (click)=\"helpScreensDone['draw-prompt'] = true\" class=\"done\">✓</div>\n</div>\n\n<div [@modal] *ngIf=\"!helpScreensDone['read-prompt'] && (session.state.subphase === 'dealer-talking')\" class=\"help-modal\" (swipeup)=\"captureSwipe()\">\n    <div>Read out your card then swipe <strong>UP</strong> to reveal it</div>\n    <div (click)=\"helpScreensDone['read-prompt'] = true\" class=\"done\">✓</div>\n</div>\n\n<div [@modal] *ngIf=\"!helpScreensDone['gather'] && (session.state.subphase === 'awaiting-dealer-gather')\" class=\"help-modal\" (swipeup)=\"captureSwipe()\">\n    <div>Everyone has played a card. Swipe <strong>DOWN</strong> to gather the responses</div>\n    <div (click)=\"helpScreensDone['gather'] = true\" class=\"done\">✓</div>\n</div>\n\n<div [@modal] *ngIf=\"!helpScreensDone['announce'] && (session.state.subphase === 'dealer-announcing-player-cards')\" class=\"help-modal\" (swipeup)=\"captureSwipe()\">\n    <div>Read out each prompt/response combo. For each player <strong>TAP</strong> to cycle through cards (if more than one) and then swipe <strong>UP</strong> to reveal the set</div>\n    <div (click)=\"helpScreensDone['announce'] = true\" class=\"done\">✓</div>\n</div>\n\n<div [@modal] *ngIf=\"!helpScreensDone['browse'] && (session.state.subphase === 'dealer-judging')\" class=\"help-modal\" (swipeup)=\"captureSwipe()\">\n    <div>Time to pick a winner! <strong>TAP</strong> to pick your fave</div>\n    <div (click)=\"helpScreensDone['browse'] = true\" class=\"done\">✓</div>\n</div>","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { trigger, transition, style, animate, state, keyframes } from '@angular/animations';\nimport { Subscription } from 'rxjs';\nimport { ServerService } from 'src/app/services/server/server.service';\nimport { Session } from 'src/app/services/server/session';\nimport { PlayerClient } from 'src/app/services/server/client';\nimport { GameState, Subphase, PlayerClientState, Card } from 'src/app/common/interfaces';\n\ntype Anim = 'left' | 'right' | 'play' | 'draw';\n\nconst flashFrames = keyframes([\n    style({ color: \"initial\", offset: 0 }),\n    style({ color: \"hotpink\", offset: 0.2 }),\n    style({ color: \"hotpink\", offset: 0.8 }),\n    style({ color: \"initial\", offset: 1 }),\n]);\n\n@Component({\n    selector: 'app-player-game',\n    templateUrl: './player-game.component.html',\n    styleUrls: ['./player-game.component.scss'],\n    animations: [\n        trigger('noop', [\n            transition(':enter', animate('0s'))\n        ]),\n        trigger('flash', [\n            transition('* => *', [ animate('2s', flashFrames) ]),\n        ]),\n        trigger('flash-fast', [\n            transition('* => *', [ animate('1s', flashFrames) ]),\n        ]),\n        trigger('modal', [\n            transition(':enter', [\n                style({ opacity: 0 }),\n                animate('200ms', style({ opacity: 1 }))\n            ]),\n            transition(':leave', [\n                style({ opacity: 1 }),\n                animate('200ms', style({ opacity: 0 }))\n            ])\n        ]),\n        trigger('fly-in', [\n            transition(':enter', [\n                style({ transform: 'translateY(-100%)' }),\n                animate('100ms', style({ transform: 'translateY(0%)' }))\n            ]),\n        ]),\n    ],\n})\n\nexport class PlayerGameComponent implements OnInit, OnDestroy {\n\n    session: Session;\n    player: PlayerClient;\n    stateSubscription: Subscription;\n\n    // transient state, won't perisist through a reload\n    currentCard = 0;\n    playerHasPlayed = false; // = 'players-playing' AND not dealer AND not isPlayersTurn\n    playerHasRedrawn = false;\n    cardsPlayed: Card[] = [];\n\n    // tutorial state\n    browseCount = 0;\n    helpScreensDone = {\n        'browse-response': true,\n        'select-response': true,\n        'draw-new': true,\n        'enjoy': true,\n        'finish': true,\n    };\n\n    constructor(private server: ServerService) { }\n\n    captureSwipe() {}\n\n    ngOnInit() {\n\n        this.session = this.server.activeSession;\n        this.player = this.server.activeClient as PlayerClient;\n\n        const hasDoneTutorials = localStorage.getItem('player-tutorial-complete');\n\n        // enable tutorial screens\n        if (!hasDoneTutorials) {\n            for (const key in this.helpScreensDone) {\n                this.helpScreensDone[key] = false;\n            }\n        }\n\n        this.stateSubscription = this.session.observableState.subscribe((state: GameState) => {\n            // this doesn't occur when transitioning from dealer, or first visit state has already been handled before the route change\n            if (state.subphase === Subphase.TurnBegin) {\n\n                // reset client-managed state\n                this.playerHasPlayed = false;\n                this.playerHasRedrawn = false;\n                this.cardsPlayed = [];\n\n                // save tutorial progress\n                if (!hasDoneTutorials) {\n                    localStorage.setItem('player-tutorial-complete', 'true');\n                }\n            }\n        });\n    }\n\n    ngOnDestroy() {\n        this.stateSubscription?.unsubscribe();\n    }\n\n    get statusText() {\n        switch (this.session.state.subphase) {\n            case Subphase.TurnBegin:\n            case Subphase.AwaitingDealerGather:\n                return 'Waiting on Dealer'\n            case Subphase.DealerAnnouncingCard:\n            case Subphase.DealerAnnouncingPlayerCards:\n                return 'Listen to Dealer';\n            case Subphase.PlayersPlaying:\n                return this.player.state.isPlayersTurn ?\n                    `Playing card ${this.cardsPlayed.length + 1} of ${this.session.state.promptCard.responses}` :\n                    `Waiting for other Players`;\n            case Subphase.DealerJudging:\n                return 'Dealer Passing Judgement';\n            case Subphase.TurnResults:\n                return 'Results';\n            default:\n                return this.session.state.subphase as string;\n        }\n    }\n\n    get subStatusText() {\n        if (this.playerHasPlayed && !this.playerHasRedrawn) {\n            return `Need ${this.session.state.promptCard.responses} card(s)`;\n        }\n        return `${this.currentCard + 1} of ${this.cards.length}`;\n    }\n\n    get cards() {\n        return this.player.state?.cards?.filter(c => !this.cardsPlayed.includes(c)) ?? [];\n    }\n\n    nextCard() {\n        this.browseCount++;\n        this.currentCard = ++this.currentCard % this.cards.length;\n    }\n\n    previousCard() {\n        this.browseCount++;\n        this.currentCard--;\n        if (this.currentCard < 0) {\n            this.currentCard += this.cards.length;\n        }\n    }\n\n    playCurrentCard() {\n        const cards = this.cards;\n        if (!this.player.state.isPlayersTurn) return;\n        this.cardsPlayed.push(cards[this.currentCard]);\n        if (this.cardsPlayed.length === this.session.state.promptCard.responses) {\n            this.server.playCards(this.cardsPlayed.map(c => c.id));\n            this.playerHasPlayed = true;\n            this.currentCard = this.player.state.cards.length - this.session.state.promptCard.responses;\n            this.cardsPlayed = [];\n        }\n        else if (this.currentCard === (cards.length - 1)) {\n            this.currentCard = ++this.currentCard % cards.length;\n        }\n    }\n\n    drawPlayerCards() {\n        if (this.player.state.isPlayersTurn || !this.playerHasPlayed || this.playerHasRedrawn) return;\n        this.playerHasRedrawn = true;\n    }\n\n}\n","<h1 class=\"page-title session-name\">{{session.name}}</h1>\n\n<!-- player view -->\n<div class=\"section\" [@noop]>\n\n    <span [@flash]=\"statusText\" class=\"hint\">{{statusText}}</span>\n\n    <!-- card browser-->\n    <div [@fly-in] *ngIf=\"!playerHasPlayed || playerHasRedrawn\">\n        <div (swipeleft)=\"nextCard()\" (swiperight)=\"previousCard()\" (swipeup)=\"playCurrentCard()\" class=\"card reponse\">\n            <div [innerHtml]=\"cards[currentCard]?.content | prompt\"></div>\n        </div>\n    </div>\n\n    <!-- card draw -->\n    <div *ngIf=\"playerHasPlayed && !playerHasRedrawn\">\n        <div class=\"card ghost\" (swipedown)=\"drawPlayerCards()\">\n            Draw {{session.state.promptCard.responses}} new card(s)\n        </div>\n    </div>\n\n    <!-- @TODO this doesn't make sense when on card draw -->\n    <span [@flash-fast]=\"currentCard\" class=\"hint\">{{subStatusText}}</span>\n</div>\n\n<!-- tutorial modals (player) -->\n<div [@modal] *ngIf=\"!helpScreensDone['browse-response'] && (session.state.subphase === 'turn-begin' || session.state.subphase === 'dealer-talking')\" class=\"help-modal\" (swipeup)=\"captureSwipe()\">\n    <div>Listen to the Dealer's prompt</div>\n</div>\n\n<div [@modal] *ngIf=\"!helpScreensDone['browse-response'] && session.state.subphase === 'players-playing' && player.state.isPlayersTurn\" class=\"help-modal\" (swipeup)=\"captureSwipe()\">\n    <div>Swipe <strong>LEFT</strong> and <strong>RIGHT</strong> to browse your response cards</div>\n    <div (click)=\"helpScreensDone['browse-response'] = true\" class=\"done\">✓</div>\n</div>\n\n<div [@modal] *ngIf=\"!helpScreensDone['select-response'] && browseCount === 2 && player.state.isPlayersTurn\" class=\"help-modal\" (swipeup)=\"captureSwipe()\">\n    <div>Swipe <strong>UP</strong> to play your best response(s)</div>\n    <div (click)=\"helpScreensDone['select-response'] = true\" class=\"done\">✓</div>\n</div>\n\n<div [@modal] *ngIf=\"!helpScreensDone['draw-new'] && playerHasPlayed && !playerHasRedrawn\" class=\"help-modal\" (swipeup)=\"captureSwipe()\">\n    <div>Nice one! Now swipe <strong>DOWN</strong> to pick up from the deck</div>\n    <div (click)=\"helpScreensDone['draw-new'] = true\" class=\"done\">✓</div>\n</div>\n\n<div [@modal] *ngIf=\"!helpScreensDone['enjoy'] && playerHasPlayed && playerHasRedrawn && session.state.subphase !== 'turn-results'\" class=\"help-modal\" (swipeup)=\"captureSwipe()\">\n    <div>Enjoy the other responses and wait for the dealer to pick a winner</div>\n    <div (click)=\"helpScreensDone['enjoy'] = true\" class=\"done\">✓</div>\n</div>\n\n<div [@modal] *ngIf=\"!helpScreensDone['finish'] && session.state.subphase === 'turn-results'\" class=\"help-modal\" (swipeup)=\"captureSwipe()\">\n    <div>That's it. Dealer passes on and we go again. Have fun!</div>\n    <div (click)=\"helpScreensDone['finish'] = true\" class=\"done\">✓</div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { ServerService } from 'src/app/services/server/server.service';\nimport { Router } from '@angular/router';\n\n@Component({\n    selector: 'app-player-lobby',\n    templateUrl: './player-lobby.component.html',\n    styleUrls: ['./player-lobby.component.scss']\n})\nexport class PlayerLobbyComponent implements OnInit {\n\n    session: any = null;\n    client: any = null;\n    snapActive: boolean;\n\n    player = {\n        name: '',\n        photo: ''\n    };\n\n    constructor(private server: ServerService, private router: Router) {\n        this.session = server.activeSession;\n        this.client = server.activeClient;\n\n        // @TODO: listen for game state annd then V\n        // this.router.navigateByUrl('play', { skipLocationChange: true });\n    }\n\n    ngOnInit(): void {\n    }\n\n    submit() {\n        if (!this.player.name || !this.player.photo) return;\n        this.server.enrollPlayer(this.player.name, this.player.photo);\n    }\n\n}\n","<h1 class=\"page-title session-name\">{{session.name}}</h1>\n\n<form (submit)=\"submit()\" class=\"container\" *ngIf=\"!(client.state.enrolled)\">\n    <p class=\"page-explanation\">Set how you appear to every one on the <strong>social screen</strong></p>\n\n    <div class=\"flex-pad\"></div>\n\n    <app-snapshot (photo)=\"player.photo = $event\" (active)=\"snapActive = $event\" style=\"margin: 15px;\" type=\"image/png\"></app-snapshot>\n\n    <input [(ngModel)]=\"player.name\" placeholder=\"Name\" autocapitalize=\"off\" autocomplete=\"off\" spellcheck=\"false\" class=\"big-input subtle\" name=\"notname\">\n\n    <div class=\"flex-pad\"></div>\n\n    <button class=\"big-button\" [disabled]=\"!player.name || !player.photo || snapActive\">Ready</button>\n</form>\n\n<div class=\"container\" *ngIf=\"client.state.enrolled\">\n    <div class=\"flex-pad\"></div>\n    <div class=\"spinner\">\n        <div class=\"double-bounce1\"></div>\n        <div class=\"double-bounce2\"></div>\n    </div>\n    <div class=\"name-display\"><strong>{{client.state.name}}</strong></div>\n    <div>Waiting for host</div>\n    <div class=\"flex-pad\"></div>\n</div>","import { Component, OnInit, ViewChild, ElementRef, Output, EventEmitter, Input } from '@angular/core';\nimport { environment } from 'src/environments/environment';\n\n@Component({\n    selector: 'app-snapshot',\n    templateUrl: './snapshot.component.html',\n    styleUrls: ['./snapshot.component.scss']\n})\nexport class SnapshotComponent implements OnInit {\n\n    constructor() { }\n\n    @Input('type') imageType = 'image/jpg';\n\n    @ViewChild('video') video: ElementRef<HTMLVideoElement>;\n    @ViewChild('canvas') canvas: ElementRef<HTMLCanvasElement>;\n    @ViewChild('image') image: ElementRef<HTMLCanvasElement>;\n\n    @Output('photo') photo = new EventEmitter<string>();\n    @Output('active') active = new EventEmitter<boolean>();\n\n    videoActive = false;\n    stream: MediaStream;\n    currentPhoto: string;\n    disabled = false;\n\n    emitPlaceholderPhoto() {\n        // 1x1 black pixel\n        this.currentPhoto = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAAD5Ip3+AAAADUlEQVQIHWNgYGD4DwABBAEAHnOcQAAAAABJRU5ErkJggg==';\n        this.photo.emit(this.currentPhoto);\n    }\n\n    disable() {\n        this.disabled = true;\n        this.emitPlaceholderPhoto();\n    }\n\n    ngOnInit(): void {\n        if ((!window.isSecureContext && location.protocol !== 'https:') || !navigator.mediaDevices) {\n            this.disable();\n        }\n        else if (!environment.production) {\n            this.emitPlaceholderPhoto();\n        }\n    }\n\n    toggle() {\n        if (!this.videoActive) this.start();\n        else this.takePhoto();\n    }\n\n    async start() {\n        try {\n            this.stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });\n            this.video.nativeElement.srcObject = this.stream;\n            this.video.nativeElement.play();\n            this.videoActive = true;\n            this.active.emit(true);\n            this.disabled = false;\n        }\n        catch {\n            this.videoActive = false;\n            this.active.emit(false);\n            this.disable();\n        }\n    }\n\n    takePhoto() {\n        const width = this.video.nativeElement.videoWidth;\n        const height = this.video.nativeElement.videoHeight;\n        const size = Math.min(width, height);\n        this.canvas.nativeElement.width = this.canvas.nativeElement.height = size;\n        const context = this.canvas.nativeElement.getContext('2d');\n        context.drawImage(this.video.nativeElement, (width - size) / 2, (height - size) / 2, size, size, 0, 0, size, size);\n        this.currentPhoto = this.canvas.nativeElement.toDataURL(this.imageType);\n        this.photo.emit(this.currentPhoto);\n        this.video.nativeElement.srcObject = null;\n        for (const track of this.stream.getTracks()) {\n            track.stop();\n        }\n        this.videoActive = false;\n        this.active.emit(false);\n    }\n\n}","<div (click)=\"toggle()\" class=\"click-container\" [class.active]=\"videoActive\">\n    <video #video playsinline>Video stream not available.</video>\n    <div class=\"content\" [class.active]=\"videoActive\">\n        <div *ngIf=\"disabled\">Camera Unavailable</div>\n        <div *ngIf=\"!disabled && !currentPhoto || videoActive\">Tap to {{videoActive ? 'Save' : 'Snap'}}!</div>\n        <img #image *ngIf=\"!disabled && currentPhoto && !videoActive\" class=\"photo\" [src]=\"currentPhoto\">\n    </div>\n    <canvas #canvas></canvas>\n</div>","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PlayComponent } from './play.component';\nimport { ConnectComponent } from '../shared/shared.module';\nimport { PlayerLobbyComponent } from './lobby/player-lobby.component';\nimport { PlayerGameComponent } from './game/player-game.component';\nimport { PlayerDealComponent } from './deal/deal.component';\n\nconst routes: Routes = [\n    {\n        path: 'play',\n        component: PlayComponent,\n        children: [\n            { path: 'connect', component: ConnectComponent, data: { role: 'player' } },\n            { path: 'lobby', component: PlayerLobbyComponent },\n            { path: 'game', component: PlayerGameComponent },\n            { path: 'deal', component: PlayerDealComponent },\n        ]\n    },\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule]\n})\nexport class PlayRoutingModule { }\n","import { Component } from '@angular/core';\nimport { GameModeBase } from '../gamemode-base';\nimport { PlayerClient } from '../services/server/client';\n\n@Component({\n    selector: 'app-play',\n    templateUrl: './play.component.html',\n    styleUrls: ['./play.component.scss']\n})\nexport class PlayComponent extends GameModeBase {\n\n    name = 'PlayComponent';\n    role = 'player';\n    defaultRouteCommand = ['connect'];\n    exitPending = false;\n\n    determineRoute(): string[] {\n        if (\n            this.server.activeSession.state.phase === 'lobby' ||\n            !(this.server.activeClient as PlayerClient).state.enrolled\n        ) return ['lobby'];\n        else if (this.server.activeSession.state.phase === 'game') {\n            if (this.server.activeSession.state.dealer === this.server.activeClient.id) return ['deal'];\n            else return ['game'];\n        }\n        return null;\n    }\n\n    captureSwipe() {}\n\n    exit() {\n        // deliberate exit, clear the stored state so we don't attempt to reconnect on reload\n        this.storage.clear();\n        this.server.withdraw(); // server will close us\n    }\n}","<router-outlet></router-outlet>\n\n<button class=\"exit dealer\" [ngClass]=\"{ dealer: server?.activeClient?.state?.isDealer }\" *ngIf=\"server.activeSession\" style=\"position: absolute; top: 0; left: 0;\" (click)=\"exitPending = true\">\n    <img src=\"../../assets/close.png\">\n</button>\n\n<div [@modal] *ngIf=\"exitPending\" class=\"help-modal\" (swipeup)=\"captureSwipe()\">\n    <div>Really exit? It's permanent, you know?</div>\n    <div style=\"display: flex; flex-direction: row;\">\n        <div (click)=\"exit()\" class=\"done\">✓</div>\n        <div style=\"width: 10px;\"></div>\n        <div (click)=\"exitPending = false\" class=\"done\">X</div>\n    </div>\n</div>\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { SharedModule } from 'src/app/shared/shared.module';\n\nimport { PlayRoutingModule } from './play-routing.module';\nimport { PlayComponent } from './play.component';\n\nimport { PlayerLobbyComponent } from './lobby/player-lobby.component';\nimport { PlayerGameComponent } from './game/player-game.component';\n\nimport { SnapshotComponent } from 'src/app/play/lobby/snapshot/snapshot.component';\nimport { PlayerDealComponent } from './deal/deal.component';\n\n@NgModule({\n    declarations: [\n        PlayComponent,\n        PlayerLobbyComponent,\n        PlayerGameComponent,\n        SnapshotComponent,\n        PlayerDealComponent,\n    ],\n    imports: [\n        CommonModule,\n        SharedModule,\n        FormsModule,\n        PlayRoutingModule\n    ],\n    providers: [],\n    bootstrap: [PlayComponent]\n})\nexport class PlayModule { }\n","\nimport { EventEmitter } from '@angular/core';\nimport { Role, ClientState, PlayerClientState } from 'src/app/common/interfaces';\n\nclass Client {\n    id: string;\n    token: string;\n    role: Role;\n    state: ClientState = {};\n\n    // state emitter\n    observableState = new EventEmitter<ClientState>();\n\n    constructor() { }\n}\n\nclass PlayerClient extends Client {\n    state: PlayerClientState = {\n        name: '',\n        photo: '',\n        connected: false,\n        enrolled: false,\n        cards: [],\n        isDealer: false,\n        score: 0,\n        isPlayersTurn: false,\n        promptCard: null,\n        responseOptions: []\n    };\n\n    // state emitter\n    observableState = new EventEmitter<PlayerClientState>();\n}\n\nexport { Client, PlayerClient };\n","import { Injectable, EventEmitter } from '@angular/core';\nimport { first } from 'rxjs/operators';\nimport { environment } from 'src/environments/environment';\nimport { StorageService } from '../storage/storage.service';\nimport { Session } from './session';\nimport { Client, PlayerClient } from './client';\nimport { Message, ClientDetails, PlayerClientState, PlayerData, GameState, GameDetails, ClientState, CommandType } from 'src/app/common/interfaces';\n\nconst WS_URI = `${environment.secureServer ? 'wss' : 'ws'}://${environment.serverUri}`;\nconst HTTP_URI = `${environment.secureServer ? 'https' : 'http'}://${environment.serverUri}`;\n\nclass SessionInitData {\n    id: string;\n    name: string;\n    hostDetails: {\n        id: string,\n        token: string\n    };\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ServerService {\n\n    socket: WebSocket;\n    _hasReceivedClientState = false;\n    _hasReceivedGameState = false;\n\n    activeSession: Session;\n    activeClient: Client;\n    pendingState: { client: ClientState, game: GameState };\n\n    connected = new EventEmitter<boolean>();\n    session = new EventEmitter<Session>();\n    client = new EventEmitter<Client>();\n\n    constructor(private storage: StorageService) { }\n\n    get isConnected() {\n        return this._hasReceivedGameState && this._hasReceivedClientState;\n    }\n\n    async createSession(settings) {\n        const response = await fetch(`${HTTP_URI}/session`, { method: 'POST', body: JSON.stringify(settings), headers: { 'Content-Type': 'application/json' } });\n        const result = (await response.json()) as SessionInitData; // need to check status\n        return result;\n    }\n\n    async getSession(sessionId: string, hostToken: string) {\n        const response = await fetch(`${HTTP_URI}/session/${sessionId}?token=${hostToken}`, { method: 'GET' });\n        const result = (await response.json()) as unknown; // need to check status\n        return result;\n    }\n\n    async connectSession(sessionId: string, role: string, reconnect?: { id: string, token: string }) {\n\n        // if there's already a session in place it needs to be torn down (otherwise we end up with multiple websocket connections)\n\n        let url = `${WS_URI}/session/${sessionId}?role=${role}`;\n        if (reconnect) {\n            url = `${url}&id=${reconnect.id}&token=${reconnect.token}`;\n        }\n\n        this.socket = await this._connectWebSocket(url);\n        this.socket.addEventListener('error', err => this._handleSocketError(err));\n        this.socket.addEventListener('message', ev => this._handleSocketMessage(ev));\n        this.socket.addEventListener('close', ev => this._handleSocketClose(ev));\n\n        this.activeSession = new Session(sessionId, this.socket);\n        this.activeClient = role === 'player' ? new PlayerClient() : new Client();\n\n        // until this happens activeSession/activeClient are in an undefined state\n        await this.connected.pipe(first()).toPromise();\n\n        this.storage.lastSession = sessionId;\n        this.storage.lastRole = role;\n        if (reconnect) {\n            this.storage.lastId = reconnect.id;\n            this.storage.lastToken = reconnect.token;\n        }\n    }\n\n    _connectWebSocket(url: string) {\n        return new Promise<WebSocket>((resolve, reject) => {\n\n            const socket = new WebSocket(url);\n\n            function onOpen(ev) {\n                socket.removeEventListener('open', onOpen);\n                socket.removeEventListener('error', onError);\n                resolve(socket);\n            }\n\n            function onError(err) { // ideally try and swallow the network error, don't want that in console log\n                socket.removeEventListener('open', onOpen);\n                socket.removeEventListener('error', onError);\n                reject(err);\n            }\n\n            socket.addEventListener('open', onOpen);\n            socket.addEventListener('error', onError);\n        });\n    }\n\n    enrollPlayer(name: string, photo: string) {\n        this.socket.send(JSON.stringify({ type: CommandType.PlayerEnroll, name, photo }));\n    }\n\n    withdraw() {\n        this.socket.send(JSON.stringify({ type: CommandType.Withdraw }));\n    }\n\n    startGame() {\n        this.socket.send(JSON.stringify({ type: CommandType.StartGame }));\n    }\n\n    endGame() {\n        this.socket.send(JSON.stringify({ type: CommandType.EndGame }));\n    }\n\n    drawPromptCard() {\n        this.socket.send(JSON.stringify({ type: CommandType.DrawDealerCard }));\n    }\n\n    revealPromptCard() {\n        this.socket.send(JSON.stringify({ type: CommandType.RevealDealerCard }));\n    }\n\n    playCards(cards: number[]) {\n        this.socket.send(JSON.stringify({ type: CommandType.PlayCards, cards }));\n    }\n\n    gatherCards() {\n        this.socket.send(JSON.stringify({ type: CommandType.GatherCards }));\n    }\n\n    revealPlayerCards(cardSetId: string) {\n        this.socket.send(JSON.stringify({ type: CommandType.RevealPlayerCards, cardSetId }));\n    }\n\n    selectWinner(cardSetId: string) {\n        this.socket.send(JSON.stringify({ type: CommandType.SelectWinner, cardSetId }));\n    }\n\n    endTurn() {\n        this.socket.send(JSON.stringify({ type: CommandType.EndTurn }));\n    }\n\n    _finishConnect() {\n        // emit first, crucial details available (ids etc)\n        this.connected.emit(true);\n    }\n\n    _handleSocketError(ev: Event) { // there's a chance a reconnect could fix this\n        console.log('socket error');\n        this.connected.emit(false);\n        this._hasReceivedClientState = false;\n        this._hasReceivedGameState = false\n        this.activeSession = null;\n        this.activeClient = null;\n    }\n\n    _handleSocketClose(ev: CloseEvent) { // there's a chance a reconnect could fix this\n        console.log('socket closed');\n        this.connected.emit(false);\n        this._hasReceivedClientState = false;\n        this._hasReceivedGameState = false\n        this.activeSession = null;\n        this.activeClient = null;\n    }\n\n    _handleSocketMessage(ev: MessageEvent) {\n        console.log(`Message received: ${ev.data}`);\n\n        const message = JSON.parse(ev.data) as Message;\n\n        if (message.type === 'game-state-full') {\n            this._handleGameStateFull(message.game);\n        }\n        else if (message.type === 'game-state-patch') {\n            this._handleGameStatePatch(message.state);\n        }\n        else if (message.type === 'client-state-full') {\n            this._handleClientStateFull(message.client);\n        }\n        else if (message.type === 'client-state-patch') {\n            this._handleClientStatePatch(message.state);\n        }\n        else if (message.type === 'player-add') {\n            this._handlePlayerAdd(message.player);\n        }\n        else if (message.type === 'player-update') {\n            this._handlePlayerUpdate(message.id, message.state);\n        }\n        else if (message.type === 'player-remove') {\n            this._handlePlayerRemove(message.id);\n        }\n    }\n\n    _handlePlayerAdd(player: ClientDetails<PlayerClientState>) { // @TODO not quite the right input type. Server should send only what we need\n        const playerData: PlayerData = {\n            id: player.id,\n            connected: player.state.connected,\n            enrolled: player.state.enrolled,\n            name: player.state.name,\n            photo: player.state.photo,\n            score: player.state.score,\n        };\n        this.activeSession.players = [...this.activeSession.players, playerData];\n        this.activeSession.observablePlayers.emit(this.activeSession.players);\n    }\n\n    _handlePlayerRemove(id: string) {\n        this.activeSession.players = this.activeSession.players.filter(p => p.id !== id);\n        this.activeSession.observablePlayers.emit(this.activeSession.players);\n    }\n\n    _handlePlayerUpdate(id: string, state: Partial<PlayerClientState>) {\n        // this is ugly but for now the received info Partial<PlayerClientState> is a superset of the PlayerData we're interested in\n        const player = this.activeSession.players.find(p => p.id === id);\n        if (!player) {\n            console.warn('Received player update for a player not currently tracked. Ignoring');\n            return;\n        }\n        if ('enrolled' in state) {\n            player.enrolled = state.enrolled;\n        }\n        if ('connected' in state) {\n            player.connected = state.connected;\n        }\n        if ('name' in state) {\n            player.name = state.name;\n        }\n        if ('photo' in state) {\n            player.photo = state.photo;\n        }\n        if ('score' in state) {\n            player.score = state.score;\n        }\n\n        // forces updates so anything that applies a pipe to the player list will be re-run\n        this.activeSession.players = [...this.activeSession.players];\n    }\n\n    _handleGameStatePatch(patch: Partial<GameState>) {\n        const state = Object.assign(this.activeSession.state, patch);\n        this.activeSession.state = Object.assign(this.activeSession.state, patch);\n        this.activeSession.observableState.emit(this.activeSession.state);\n    }\n\n    _handleGameStateFull(details: GameDetails) {\n\n        // happens once on first connect\n        this.activeSession.name = details.name;\n        this.activeSession.id = details.id;\n        this._handleGameStatePatch(details.state);\n\n        // if we've already received client state but weren't already connected we now are\n        if (!this.isConnected) {\n            this._hasReceivedGameState = true;\n            if (this.isConnected) this._finishConnect();\n        }\n    }\n\n    _handleClientStatePatch(patch: Partial<ClientState>) {\n        if (this.activeClient.role === 'player') {\n            this._handlePlayerClientStatePatch(patch as Partial<PlayerClientState>);\n        }\n        // none of the others have state yet\n    }\n\n    _handlePlayerClientStatePatch(patch: Partial<PlayerClientState>) {\n        const client = this.activeClient as PlayerClient;\n        client.state = Object.assign(client.state, patch);\n\n        // store reconnect details\n        // @TODO storage service should be in charge of listening for and actioning this. not server's job\n        if (patch.enrolled === true) {\n            this.storage.lastId = client.id;\n            this.storage.lastToken = client.token;\n        }\n\n        this.activeClient.observableState.emit(this.activeClient.state);\n    }\n\n    _handleClientStateFull(details: ClientDetails<ClientState>)\n    {\n        this.activeClient.id = details.id;\n        this.activeClient.role = details.role;\n        this.activeClient.token = details.token;\n        this._handleClientStatePatch(details.state);\n\n        // store reconnect details if host (mirror doesn't store reconnect details at all and player stores later once enrolled)\n        // @TODO storage service should be in charge of listening for and actioning this. not server's job\n        if (this.activeClient.role === 'host') {\n            this.storage.lastId = details.id;\n            this.storage.lastToken = details.token;\n        }\n\n        if (this.activeClient.role === 'player') {\n            this._handlePlayerClientStatePatch(details.state as Partial<PlayerClientState>);\n        }\n\n        // if we've already received game state but weren't already connected we now are\n        if (!this.isConnected) {\n            this._hasReceivedClientState = true;\n            if (this.isConnected) this.connected.emit(true);\n        }\n    }\n}\n","import { EventEmitter } from '@angular/core';\nimport { GameState, Subphase, PlayerData } from 'src/app/common/interfaces';\n// import { GameState, Phase, PlayerData } from './server.service';\n\nclass Session {\n\n    name = '';\n    players: PlayerData[] = [];\n    state: GameState = {\n        hostConnected: false,\n        phase: 'unknown',\n        numLurkers: 0,\n        numMirrors: 0,\n        responseDeckCount: 0,\n        promptDeckCount: 0,\n        dealer: '',\n        subphase: Subphase.TurnBegin,\n        revealedResponseCards: [],\n        playersResponded: [],\n        promptCard: null,\n        winningCard: null\n    };\n\n    // player list emitter\n    observablePlayers = new EventEmitter<PlayerData[]>();\n\n    // state emitter\n    observableState = new EventEmitter<GameState>();\n\n    constructor(public id: string, public socket: WebSocket) {}\n}\n\nexport { Session };\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class StorageService {\n\n    #lastSession: string = null;\n    #lastRole: string = null;\n    #lastToken: string = null;\n    #lastId: string = null;\n\n    constructor() {\n        this.#lastSession = localStorage.getItem('lastSession');\n        this.#lastRole = localStorage.getItem('lastRole');\n        this.#lastToken = localStorage.getItem('lastToken');\n        this.#lastId = localStorage.getItem('lastId');\n    }\n\n    set lastSession(value) {\n        this.#lastSession = value;\n        localStorage.setItem('lastSession', this.#lastSession);\n    }\n\n    get lastSession() {\n        return this.#lastSession;\n    }\n\n    set lastRole(value) {\n        this.#lastRole = value;\n        localStorage.setItem('lastRole', this.#lastRole);\n    }\n\n    get lastRole() {\n        return this.#lastRole;\n    }\n\n    set lastToken(value) {\n        this.#lastToken = value;\n        localStorage.setItem('lastToken', this.#lastToken || '');\n    }\n\n    get lastToken() {\n        return this.#lastToken;\n    }\n\n    set lastId(value) {\n        this.#lastId = value;\n        localStorage.setItem('lastId', this.#lastId || '');\n    }\n\n    get lastId() {\n        return this.#lastId;\n    }\n\n    clear() {\n        localStorage.removeItem('lastId');\n        localStorage.removeItem('lastToken');\n        localStorage.removeItem('lastRole');\n        localStorage.removeItem('lastSession');\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ServerService } from 'src/app/services/server/server.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { StorageService } from 'src/app/services/storage/storage.service';\nimport { environment } from 'src/environments/environment';\n\n@Component({\n    selector: 'app-connect',\n    templateUrl: './connect.component.html',\n    styleUrls: ['./connect.component.scss']\n})\nexport class ConnectComponent implements OnInit {\n\n    isoCode = '';\n    role = 'player';\n\n    constructor(private serverService: ServerService, private storageService: StorageService, private router: Router, private route: ActivatedRoute) {\n        this.role = route.snapshot.data.role;\n    }\n\n    ngOnInit(): void { }\n\n    async startSession() {\n\n        if (this.isoCode?.length !== 6) return;\n\n        if (this.role === 'mirror') {\n            await this.serverService.connectSession(this.isoCode.toUpperCase(), 'mirror');\n        }\n        else {\n            await this.serverService.connectSession(this.isoCode.toUpperCase(), 'player');\n        }\n    }\n\n    async tryPasteCode() {\n        // shortcut for dev\n        if (environment.production) return;\n        try {\n            const code = await navigator.clipboard.readText();\n            if (code.length === 6) this.isoCode = code;\n        }\n        catch {}\n    }\n}\n","<div class=\"banner\">{{role}}</div>\n\n<div class=\"narrow-container\">\n\n    <h1 class=\"page-title\">Enter IsoCode</h1>\n\n    <p class=\"page-explanation\">The IsoCode for your game can be found on the <strong>Social Screen</strong> (or one of\n        it's mirrors)</p>\n\n    <form (submit)=\"startSession()\" class=\"form-container\">\n\n        <input [(ngModel)]=\"isoCode\" (focus)=\"tryPasteCode()\" class=\"big-input isocode-entry\" placeholder=\"ISOCODE\"\n            autocapitalize=\"off\" autocomplete=\"off\" autofocus maxlength=\"6\" name=\"isocode\">\n\n        <div class=\"flex-pad\"></div>\n\n        <button type=\"submit\" class=\"big-button\"\n            [disabled]=\"isoCode?.length !== 6\">{{role === 'player' ? 'Join' : 'Mirror'}}</button>\n\n    </form>\n\n</div>","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n    name: 'prompt'\n})\nexport class PromptPipe implements PipeTransform {\n    transform(value: string): unknown {\n        return value ? value.replace(/\\*\\*\\*/g, '________') : '';\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n    name: 'truthy'\n})\nexport class TruthyPipe implements PipeTransform {\n    transform(items: any[], property: string) {\n        return items.filter(item => item[property]);\n    }\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { ConnectComponent } from './components/connect/connect.component';\nimport { TruthyPipe } from './pipes/truthy/truthy.pipe';\nimport { PromptPipe } from './pipes/prompt/prompt.pipe';\n\n@NgModule({\n    declarations: [\n        ConnectComponent,\n        TruthyPipe,\n        PromptPipe,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n    ],\n    exports: [\n        ConnectComponent,\n        TruthyPipe,\n        PromptPipe,\n    ]\n})\nexport class SharedModule { }\n\nexport { ConnectComponent };\n","import { Component, OnInit } from '@angular/core';\nimport { keyframes, style, trigger, transition, animate } from '@angular/animations';\nimport { ServerService } from 'src/app/services/server/server.service';\nimport { Session } from 'src/app/services/server/session';\nimport { Client } from 'src/app/services/server/client';\nimport { PlayerData, Subphase } from 'src/app/common/interfaces';\n\nconst flashFrames = keyframes([\n    style({ color: \"initial\", offset: 0 }),\n    style({ color: \"hotpink\", offset: 0.2 }),\n    style({ color: \"hotpink\", offset: 0.8 }),\n    style({ color: \"initial\", offset: 1 }),\n]);\n\n@Component({\n    selector: 'app-social-game',\n    templateUrl: './social-game.component.html',\n    styleUrls: ['./social-game.component.scss'],\n    animations: [\n        trigger('flash', [\n            transition('* => *', [ animate('1s', flashFrames) ]),\n        ]),\n    ]\n})\nexport class SocialGameComponent implements OnInit {\n\n    session: Session;\n    client: Client;\n\n    useFlipAnimationHack = navigator.userAgent.match('PlayStation 4');\n\n    constructor(private server: ServerService) { }\n\n    get dealer() {\n        return this.session.players.find(p => this.session.state.dealer === p.id);\n    }\n\n    get otherPlayers() {\n        return this.session.players.find(p => this.session.state.dealer !== p.id);\n    }\n\n    index = 0;\n\n    ngOnInit() {\n        this.session = this.server.activeSession;\n        this.client = this.server.activeClient;\n        this.index = 0;\n\n        // @TODO only have this active while in the right phase. Reset index to zero and timer everytime a new card is added?\n        setInterval(() => {\n            if (this.session.state.promptCard) {\n                this.index = ++this.index % this.session.state.promptCard.responses;\n            }\n            else {\n                this.index = 0;\n            }\n        }, 1500);\n\n        setInterval(() => {\n            // keep server alive\n            this.server.getSession(this.session.id, this.client.token);\n        }, 60000);\n    }\n\n    getPlayerById(id: string) {\n        return this.session.players.find(p => p.id === id);\n    }\n\n    get players() {\n        return this.session.players.filter(p => p.enrolled);\n    }\n\n    get dealerFlipped() {\n        return !!this.session.state.promptCard;\n    }\n\n    get showPlayerResponses() {\n        return !this.showResponseCards;\n    }\n\n    get showResponseCards() {\n        return [Subphase.DealerAnnouncingPlayerCards, Subphase.DealerJudging, Subphase.TurnResults].includes(this.session.state.subphase);\n    }\n\n}\n","<div class=\"header-row\">\n    <h1 class=\"page-title session-name\">{{session.name}}</h1>\n    <div class=\"isocode-box\">\n        {{session.id}}\n    </div>\n</div>\n\n<div *ngIf=\"session.state.subphase === 'turn-begin'\" class=\"turn-begin\">\n    <div class=\"spinner\">\n        <div class=\"double-bounce1\"></div>\n        <div class=\"double-bounce2\"></div>\n    </div>\n    <div>{{getPlayerById(session.state.dealer)?.name}}'s Deal</div>\n</div>\n\n<div *ngIf=\"session.state.subphase !== 'turn-begin'\" class=\"game-section\">\n\n    <!-- dealer card -->\n    <div class=\"flip-card responsive-card\" *ngIf=\"session.state.subphase === 'dealer-talking' || session.state.promptCard\" [ngClass]=\"{ flip: dealerFlipped, fliphack: useFlipAnimationHack }\">\n        <div class=\"flip-card-inner\">\n            <div class=\"flip-card-content card dealer prompt\">\n                <img class=\"card-image\" [src]=\"getPlayerById(session.state.dealer)?.photo\" style=\"box-sizing: border-box; border: 2px solid white;\">\n                <!-- {{getPlayerById(session.state.dealer)?.name}} -->\n            </div>\n            <div class=\"flip-card-content card dealer prompt back\">\n                <div [innerHtml]=\"(session.state.promptCard?.content | prompt) || ''\"></div>\n            </div>\n        </div>\n    </div>\n\n    <!-- response card player logos (these don'tneed to be flippable) -->\n    <div *ngFor=\"let playerId of session.state.playersResponded\">\n        <div class=\"flip-card responsive-card\" *ngIf=\"showPlayerResponses\">\n            <div class=\"flip-card-inner\">\n                <div class=\"flip-card-content card dealer response\">\n                    <img class=\"card-image\" [src]=\"getPlayerById(playerId)?.photo\">\n                    <!-- {{getPlayerById(playerId)?.name}} -->\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- actual response cards -->\n    <div *ngFor=\"let cardSet of session.state.revealedResponseCards; let i = index\">\n        <div class=\"flip-card responsive-card\" *ngIf=\"showResponseCards\" [ngClass]=\"{ fullflip: session.state.winningCard?.cardSetId === cardSet.id, fliphack: useFlipAnimationHack }\">\n            <div class=\"flip-card-inner\">\n                <div class=\"flip-card-content card dealer response\">\n                    <div *ngIf=\"session.state.promptCard.responses > 1\" class=\"index\">{{index + 1}}/{{session.state.promptCard.responses}}</div>\n                    <div class=\"flex-pad\"></div>\n                    <div [innerHtml]=\"cardSet.cards[index].content | prompt\"></div>\n                    <div class=\"flex-pad\"></div>\n                    <div class=\"number\">{{i + 1}}</div>\n                </div>\n                <div *ngIf=\"session.state.winningCard?.cardSetId === cardSet.id\" class=\"flip-card-content card dealer response back\">\n                    <img class=\"card-image\" [src]=\"getPlayerById(session.state.winningCard.player).photo\">\n                </div>\n            </div>\n        </div>\n    </div>\n\n</div>\n\n<div *ngIf=\"dealer\" class=\"stats-section\">\n\n    <div [@flash]=\"session.state.responseDeckCount\" class=\"card response deck\">{{session.state.responseDeckCount}}</div>\n\n    <div class=\"flex-pad\"></div>\n\n    <div class=\"player-row\">\n        <div *ngFor=\"let player of players\" class=\"player\" [ngClass]=\"{ dealer: session.state.dealer === player.id }\">\n            <img [src]=\"player.photo\">\n            <div class=\"name\">{{player.name}} ({{player.score}} pts)</div>\n        </div>\n    </div>\n\n    <div class=\"flex-pad\"></div>\n\n    <div [@flash]=\"session.state.promptDeckCount\" class=\"card prompt deck\">{{session.state.promptDeckCount}}</div>\n\n</div>","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { environment } from 'src/environments/environment';\n\nimport { ServerService } from 'src/app/services/server/server.service';\nimport { Session } from 'src/app/services/server/session';\n\n@Component({\n    selector: 'app-social-lobby',\n    templateUrl: './social-lobby.component.html',\n    styleUrls: ['./social-lobby.component.scss'],\n})\nexport class SocialLobbyComponent implements OnInit {\n\n    session: Session = null;\n    role = 'host';\n    animate = true;\n    animationRadius = '140px';\n\n    minPlayers = environment.production ? 3 : 2; // this should be server-side\n\n    constructor(private serverService: ServerService, route: ActivatedRoute) {\n        this.session = serverService.activeSession;\n        this.role = route.snapshot.data.role;\n    }\n\n    ngOnInit(): void {\n        this.session.observablePlayers.subscribe(() => {\n            // reset the animation class on all elements to keep them in sync\n            this.animate = false;\n            // time value here is hit and miss. 10 usually not enough to trigger anim restart\n            setTimeout(() => { this.animate = true }, 50);\n        });\n    }\n\n    copyCode() {\n        navigator.clipboard.writeText(this.session.id);\n    }\n\n    startGame() {\n        this.serverService.startGame();\n    }\n\n    cancelGame() {\n        this.serverService.endGame();\n    }\n\n    bubbleTransform(index: number) {\n        const offset = this.bubbleOffset(index);\n        return `rotate(${offset}) translateX(${this.animationRadius}) rotate(-${offset})`;\n    }\n\n    bubbleOffset(index: number) {\n        const sliceSize = 360 / this.session.players.length;\n        return `${sliceSize * index}deg`;\n    }\n}\n","<div *ngIf=\"role === 'host'\" class=\"banner\">{{role}} ({{session.state.numMirrors}} mirrors)</div>\n<div *ngIf=\"role === 'mirror'\" class=\"banner\">{{role}} ({{session.state.numMirrors}} total)</div>\n\n<div class=\"header-row\">\n    <h1 class=\"page-title session-name\">{{session.name}}</h1>\n    <div class=\"isocode-box\" (click)=\"copyCode()\">\n        {{session.id}}\n    </div>\n</div>\n\n<p class=\"narrow-element page-explanation\">This is the social lobby where we wait for everyone to join the game using the\n    <strong>IsoCode</strong> above. As you can see, games are given <strong>fun names</strong> so everyone knows\n    they're in the right place. <strong>Lurkers</strong> are the peasants who've connected but haven't yet\n    registered to play.\n</p>\n\n<div class=\"flex-pad\"></div>\n\n<div class=\"player-box\">\n    <div class=\"spinner\">\n        <!--we use CSS custom properties (vars) to inject params via inline element style which are then used by predefined CSS keyframes for parameterised animation-->\n        <!--we can't return custom properties (--property) via ngClass atm (https://github.com/angular/angular/issues/9343)-->\n        <!--but we CAN do separate [style.--prop] for those-->\n        <!--separately, CSS vars not well supported on Xbox/Smart TV, so also fall back to non-animated inline transform-->\n        <div *ngFor=\"let player of session.players; let i = index\" class=\"bubble\" [class.animate]=\"animate\"\n            [style.transform]=\"bubbleTransform(i)\" [style.--i]=\"i\" [style.--n]=\"session.players.length\" [style.--offset]=\"bubbleOffset(i)\" [style.--radius]=\"animationRadius\">\n            <img *ngIf=\"player.photo\" [src]=\"player.photo\">\n            <div class=\"lurker\" *ngIf=\"!player.photo\">\n                ?\n            </div>\n            <div>{{player.name || 'Lurker'}}</div>\n        </div>\n        <div class=\"double-bounce1\"></div>\n        <div class=\"double-bounce2\"></div>\n        <div class=\"spinner-text\">{{(session.players | truthy: 'enrolled').length}} / {{minPlayers}}</div>\n    </div>\n</div>\n\n<div class=\"flex-pad\"></div>\n\n<button class=\"big-button\" (click)=\"startGame()\" *ngIf=\"role === 'host'\" [disabled]=\"(session.players | truthy: 'enrolled').length < minPlayers\">Start Game</button>\n","import { Component, OnInit, ElementRef, ViewChild } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ServerService } from 'src/app/services/server/server.service';\nimport { CardDeck } from 'src/app/common/interfaces';\n\nconst STORAGE_KEY = 'isocard-deck';\n\n@Component({\n    selector: 'app-setup',\n    templateUrl: './setup.component.html',\n    styleUrls: ['./setup.component.scss']\n})\nexport class SetupComponent implements OnInit {\n\n    @ViewChild('fileinput') fileInput: ElementRef<HTMLInputElement>;\n    cardDeck: CardDeck = null;\n    useCustomDeck = false;\n\n    constructor(private router: Router, private serverService: ServerService) { }\n\n    ngOnInit(): void {\n        this.load();\n    }\n\n    async start() {\n        const session = await this.serverService.createSession({ deck: this.useCustomDeck ? this.cardDeck : undefined });\n        await this.serverService.connectSession(session.id, 'host', session.hostDetails);\n    }\n\n    select() {\n        this.fileInput.nativeElement.click();\n    }\n\n    dragover(event: DragEvent) {\n        event.preventDefault();\n    }\n\n    fileDrop(event: DragEvent) {\n        event.preventDefault();\n        if (event.dataTransfer.files.length === 1) {\n            this.tryLoadDeck(event.dataTransfer.files[0]);\n        }\n    }\n\n    tryLoadDeck(file: File) {\n        try {\n            const reader = new FileReader();\n            reader.addEventListener('load', (ev) => {\n                const cards = JSON.parse(reader.result as string);\n                if (cards.prompts instanceof Array && cards.responses instanceof Array && typeof cards.name === 'string') {\n                    if (cards.prompts.length > 10 && cards.responses.length > 20) {\n                        this.cardDeck = { name: cards.name, filename: file.name, date: Date.now(), prompts: cards.prompts, responses: cards.responses };\n                        this.useCustomDeck = true;\n                        this.save(this.cardDeck);\n                    }\n                }\n            });\n            reader.readAsText(file);\n            event.preventDefault();\n        }\n        catch {\n            console.warn('[SetupComponent] Unable to load deck file');\n        }\n    }\n\n    fileSelect() {\n        if (this.fileInput.nativeElement.files.length === 1) {\n            this.tryLoadDeck(this.fileInput.nativeElement.files[0]);\n        }\n    }\n\n    save(cardDeck: CardDeck) {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(cardDeck));\n    }\n\n    clear() {\n        localStorage.removeItem(STORAGE_KEY);\n        this.fileInput.nativeElement.value = \"\";\n        this.cardDeck = null;\n        this.useCustomDeck = false;\n    }\n\n    load() {\n        const deckVal = localStorage.getItem(STORAGE_KEY);\n        if (deckVal !== null) {\n            this.cardDeck = JSON.parse(deckVal);\n            this.useCustomDeck = true;\n        }\n    }\n\n}\n","<h1 class=\"page-title\">Game Setup</h1>\n\n<p class=\"page-explanation\">You can provide your own custom deck if you don't want to play with the peasant default deck. This will be stored locally in your browser to save some dicking around next time. It <strong>won't</strong> be stored anywhere other than your browser.</p>\n\n<p class=\"page-explanation\">We don't have any other settings yet. Soz...</p>\n\n<div style=\"display: flex; align-items: center; margin: 10px;\">\n    <input name=\"custom\" type=\"checkbox\" [checked]=\"useCustomDeck\" (change)=\"useCustomDeck = !useCustomDeck\">\n    &nbsp;<label for=\"custom\">Use custom deck</label>\n</div>\n\n<div class=\"flex-pad\"></div>\n\n<div (click)=\"select()\" (dragover)=\"dragover($event)\" (drop)=\"fileDrop($event)\" class=\"dropzone\">\n    <div *ngIf=\"useCustomDeck && !cardDeck\">No custom deck loaded. Drag one here or click to select.</div>\n    <div *ngIf=\"useCustomDeck && cardDeck\" style=\"margin: 5px;\">\n        <div><strong>{{cardDeck.name}} ({{cardDeck.filename}})</strong></div>\n        <div><strong>{{cardDeck.prompts.length}}</strong> prompt cards</div>\n        <div><strong>{{cardDeck.responses.length}}</strong> response cards</div>\n        <div><strong>Stored since:</strong></div>\n        <div>{{cardDeck.date | date: 'medium'}}</div>\n        <button *ngIf=\"cardDeck\" class=\"inverse\" style=\"font-size: 0.8em; margin: 5px;\" (click)=\"clear(); $event.stopPropagation()\">Delete</button>\n    </div>\n    <div *ngIf=\"!useCustomDeck\" style=\"margin: 5px;\">\n        <div>Using default deck</div>\n        <div>\n            Courtesy of <a (click)=\"$event.stopPropagation()\" style=\"color: white;\" target=\"_\" href=\"https://cardsagainsthumanity.com\">Cards Against Humanity</a>\n        </div>\n        <div>\n            <a (click)=\"$event.stopPropagation()\" style=\"color: white; font-size: 0.7em;\" target=\"_\" href=\"https://creativecommons.org/licenses/by-nc-sa/2.0/\">Creative Commons BY-NC-SA 2.0 License</a>\n        </div>\n    </div>\n</div>\n\n<input #fileinput (change)=\"fileSelect()\" type=\"file\" multiple=\"false\" accept=\".json,.cards\" id=\"file-input\">\n\n<div class=\"flex-pad\"></div>\n\n<button [disabled]=\"useCustomDeck && !cardDeck\" class=\"big-button\" (click)=\"start()\">Start</button>","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SocialComponent } from './social.component';\nimport { SetupComponent } from './setup/setup.component';\nimport { SocialLobbyComponent } from './lobby/social-lobby.component';\nimport { SocialGameComponent } from './game/social-game.component';\nimport { ConnectComponent } from '../shared/components/connect/connect.component';\n\nconst routes: Routes = [\n    {\n        path: 'social',\n        component: SocialComponent,\n        children: [\n            { path: 'setup', component: SetupComponent },\n            { path: 'lobby', component: SocialLobbyComponent, data: { role: 'host' } },\n            { path: 'game', component: SocialGameComponent, data: { role: 'host' } },\n        ],\n        data: { role: 'host' }\n    },\n    {\n        path: 'mirror',\n        component: SocialComponent,\n        children: [\n            { path: 'setup', component: ConnectComponent, data: { role: 'mirror' } },\n            { path: 'lobby', component: SocialLobbyComponent, data: { role: 'mirror' } },\n            { path: 'game', component: SocialGameComponent, data: { role: 'mirror' } },\n        ],\n        data: { role: 'mirror' }\n    },\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule]\n})\nexport class SocialRoutingModule { }\n","import { Component } from '@angular/core';\nimport { GameModeBase } from '../gamemode-base';\nimport { GameState } from '../common/interfaces';\n\n@Component({\n    selector: 'app-social',\n    templateUrl: './social.component.html',\n    styleUrls: ['./social.component.scss']\n})\nexport class SocialComponent extends GameModeBase {\n\n    name = 'SocialComponent';\n    role = 'host'; // will be overriden by route data in base class\n    defaultRouteCommand = ['setup'];\n\n    determineRoute(state: GameState) {\n        if (state.phase === 'lobby') return ['lobby'];\n        else if (state.phase === 'game') return ['game'];\n        return null;\n    }\n\n    exit() {\n        super.exit();\n        if (this.role === 'host') {\n            this.server.endGame();\n        }\n        else {\n            this.server.socket?.close();\n        }\n    }\n\n}\n","<router-outlet></router-outlet>\n\n<button class=\"exit\" *ngIf=\"server.activeSession\" style=\"position: absolute; top: 0; left: 0;\" (click)=\"exit()\">\n    <img src=\"../../assets/close.png\">\n</button>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { SharedModule } from 'src/app/shared/shared.module';\n\nimport { SocialRoutingModule } from './social-routing.module';\nimport { SocialComponent } from './social.component';\n\nimport { SetupComponent } from './setup/setup.component';\nimport { SocialLobbyComponent } from './lobby/social-lobby.component';\nimport { SocialGameComponent } from './game/social-game.component';\n\n@NgModule({\n    declarations: [\n        SocialComponent,\n        SetupComponent,\n        SocialLobbyComponent,\n        SocialGameComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        SharedModule,\n        SocialRoutingModule,\n    ],\n    providers: [],\n    bootstrap: [SocialComponent]\n})\nexport class SocialModule { }\n","export const environment = {\n    production: true,\n    serverUri: 'isocards-staging.herokuapp.com',\n    secureServer: true,\n    useHash: true,\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nimport 'hammerjs';\n\nif (environment.production) {\n    enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n    .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}